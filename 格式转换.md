# 格式转换

## rmvb 转 mp4

```bash
ffmpeg -i input.rmvb -c:v libx264 -c:a aac -strict experimental output.mp4
```

参数说明：

- ```input.rmvb```: 是您要转换的RMVB文件的文件名。
- ```output.mp4```: 是您要生成的MP4文件的文件名。
- ```-c:v libx264```: 指定视频编码器为H.264。
- ```-c:a aac```: 指定音频编码器为AAC。
- ```-strict experimental```: 用于启用对AAC编码器的支持。

## mp4 转 mp3

### 提取音频

```bash
ffmpeg -i input.mp4 -vn -codec:a libmp3lame -q:a 4 output.mp3
```

参数说明：

- ```-i input.mp4```: 指定输入文件。
- ```-vn```: 表示不包含视频流（因为我们只想提取音频）。
- ```-codec:a libmp3lame```: 指定输出音频编码器为libmp3lame，这是MP3的编码器。
- ```-q:a 4```: 设置音频质量为中等（范围从0（最好）到5（最差））。
- ```output.mp3```: 是输出文件的名称。

### 提取指定音轨

首先需要确定视频中包含的音轨数量、编号、编码格式等信息，使用 ```-i``` 参数查看：

```bash
ffmpeg -i input.mp4
```

输出示例（重点关注 Stream #0:1 及以后的音频流）：

```
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '1.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 1
    compatible_brands: isomavc1
    creation_time   : 2023-02-22T16:23:32.000000Z
  Duration: 01:38:37.09, start: 0.000000, bitrate: 3569 kb/s
  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080 [SAR 1:1 DAR 16:9], 2799 kb/s, 23.98 fps, 23.98 tbr, 10000k tbn (default)
  Stream #0:1[0x2](und): Audio: ac3 (ac-3 / 0x332D6361), 48000 Hz, stereo, fltp, 256 kb/s (default)
  Stream #0:2[0x3](und): Audio: ac3 (ac-3 / 0x332D6361), 48000 Hz, 5.1(side), fltp, 256 kb/s (default)
  Stream #0:3[0x4](und): Audio: ac3 (ac-3 / 0x332D6361), 48000 Hz, 5.1(side), fltp, 256 kb/s (default)
```

- 音轨编号格式为 ```Stream #0:X```，其中 X 是音轨索引（从 0 开始，但通常视频是第 0 轨，音频从 1 开始）。
- 上述示例中，视频包含 3 条音轨，索引分别为 1、2、3。

提取单条音轨，使用 ```-map``` 参数指定音轨索引，格式为 ```-map 0:X```（0 表示输入文件序号，X 是音轨索引）。

```bash
ffmpeg -i input.mp4 -map 0:1 -c:a libmp3lame -q:a 2 output_1.mp3
```

- ```-map 0:1```: 表示提取第 1 条音轨
- ```-q:a 2```: 表示 MP3 音质，数值越小音质越好
